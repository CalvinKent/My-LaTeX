% Prepared by Calvin Kent
%
% CKpreamble: Package for generic preamble
% 
% MIT License
%
% Copyright (c) 2018 Calvin Kent
%
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
% 
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.
% 
\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{CKpreamble}[2018/03/08 v18.3 LaTeX package for preamble]
% Start: GENERIC PREAMBLE ...
%
%\documentclass[11pt]{article} % Not used in .sty
\RequirePackage[english]{babel} %
\RequirePackage[T1]{fontenc} % see more: https://tex.stackexchange.com/questions/44694/fontenc-vs-inputenc
\RequirePackage[utf8]{inputenc} %
\RequirePackage{amsmath} % start all equations from left, see also: https://tex.stackexchange.com/questions/119106/using-the-flush-left-align-environment-flalign
\RequirePackage{amssymb} %
\RequirePackage{amsthm} % https://en.wikibooks.org/wiki/LaTeX/Theorems
\RequirePackage{bm} % for matrix name notation, see also: https://tex.stackexchange.com/questions/3238/bm-package-versus-boldsymbol EDIT
\RequirePackage{cancel} % cancel expression, see also: https://tex.stackexchange.com/questions/47063/rightarrow-vs-implies-and-does-not-imply-symbol 
\RequirePackage{centernot} % negate operation
\RequirePackage{commath} %for \norm{}, see more: https://tex.stackexchange.com/questions/43008/absolute-value-symbols
\RequirePackage{comment} % for comment blocks
\RequirePackage{dashrule} % dash rule, see more: https://tex.stackexchange.com/questions/250237/how-to-align-a-dashrule
\RequirePackage{empheq} %for boxing multiple lines, see more: https://tex.stackexchange.com/questions/211698/box-all-equations-of-align-environment-but-not-the-equation-numbers
\RequirePackage{enumitem} %to make enumurate start from letters or custom bullets, see also: https://tex.stackexchange.com/questions/2291/how-do-i-change-the-enumerate-list-format-to-use-letters-instead-of-the-defaul
\RequirePackage{graphicx} % for university logo
%\RequirePackage[usenames, dvipsnames]{color} % see more at: https://www.sharelatex.com/learn/Using_colours_in_LaTeX#!#Introduction
\RequirePackage{lastpage} % for last page, see more: https://tex.stackexchange.com/questions/195372/referring-to-second-last-page-in-pageref-in-lastpage-package
\RequirePackage{lipsum} % for lipsum
\RequirePackage{mathrsfs} % for \mathscr , see also: https://tex.stackexchange.com/questions/151549/mathscr-latex-or-xelatex
\RequirePackage{mathtools} % for \ABoxed, see more: https://tex.stackexchange.com/questions/193242/how-to-make-a-box-around-an-equation-in-align-environment
\RequirePackage{matlab-prettifier} % matlab, see more: https://tex.stackexchange.com/questions/214612/what-is-the-difference-between-usepackagemcode-and-usepackagelistings-for
\RequirePackage{nccmath} %for fleqn numbering, see more: https://tex.stackexchange.com/questions/170353/nccmath-fleqn-numbering
\RequirePackage{parskip} % remove auto indent, see more: https://tex.stackexchange.com/questions/285042/how-to-correctly-indent-a-paragraph
\RequirePackage{physics} % \dv and \pdv, see more: https://tex.stackexchange.com/questions/225523/how-to-write-partial-differential-equation-ex-dq-dt-ds-dt-with-real-partial-d
\RequirePackage{scrextend} % to add custom margins to custom text, see more: https://tex.stackexchange.com/questions/588/how-can-i-change-the-margins-for-only-part-of-the-text
\RequirePackage{tcolorbox} %for prettier boxing, see more: https://tex.stackexchange.com/questions/287438/tcolorbox-without-background-color-transparent
\RequirePackage{titlesec} % for section title spacing, see more: https://tex.stackexchange.com/questions/53338/reducing-spacing-after-headings
\RequirePackage{ulem} % for use strikeout (\sout), see also: https://jansoehlke.com/2010/06/strikethrough-in-latex/
% TBEDIT :\RequirePackage[backend=biber]{biblatex} % Not used in .sty
% TBEDIT :\addbibresource{MATH145A2ref.bib} % Not used in .sty
\RequirePackage{xparse} % for environments with multiple arguments, see more: https://tex.stackexchange.com/questions/29973/more-than-one-optional-argument-for-newcommand
\RequirePackage{fancyhdr} % for fancy page styles; headers
\RequirePackage{pdfpages} % for inserting PDFs, see also: https://tex.stackexchange.com/questions/5911/how-to-include-pdf-pages-without-a-newpage-before-the-first-page
\RequirePackage{pgfplots} % for plotting graphs, see also: https://tex.stackexchange.com/questions/58202/drawing-simple-graphs-on-latex
\RequirePackage{background} % for adding watermark, see also: https://tex.stackexchange.com/questions/19572/does-memoir-class-have-various-page-designs-built-in?rq=1
\RequirePackage{tikz} 
\RequirePackage{changepage}
\RequirePackage{hyperref} % for PDF bookmarks
\RequirePackage[margin = 1in]{geometry} % For custom margins : [margin = 1in]

% reformat left and right brackets, see more: https://tex.stackexchange.com/questions/2607/spacing-around-left-and-right/64960
\let\originalleft\left
\let\originalright\right
\renewcommand{\left}{\mathopen{}\mathclose\bgroup\originalleft}
\renewcommand{\right}{\aftergroup\egroup\originalright} 

%\numberwithin{equation}{section} %section number equation numbers % Not used in .sty % toggle

% macros

\newcommand*{\qrule}{\vspace{2mm}{\color{blue}\hrule height 0.004mm}} % qrule with light blue color for enumerated questions
\newcommand*{\Qrule}{\vspace{2mm}{
		\color{blue}
		{\hrule height 0.004mm}
		\phantom{-}
		{\hrule height 0.004mm}
}} % Qrule (double hrule) for the end of the enumerated question
\newcommand*{\qdash}{{\color{blue}\hdashrule[0.5ex][x]{\linewidth}{0.25mm}{4mm}}\hfill} % qdash, check dashrule documentation

\DeclareMathOperator{\cis}{cis} %cos(a) + isin(a) = cis(a)
\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\proj}{proj}

\newcommand{\suchthat}{\;\ifnum\currentgrouptype=16 \;\middle|\;\else\mid\fi\;} % Shorthand for such that in set notation, see more: https://tex.stackexchange.com/questions/45713/creating-a-large-such-that-symbol
\newcommand*{\N}{\mathbb{N}} % Shorthand for Natural Numbers Set
\newcommand*{\Z}{\mathbb{Z}} % Shorthand for Integers Set
\newcommand*{\Q}{\mathbb{Q}} % Shorthand for Rational Numbers Set
\newcommand*{\R}{\mathbb{R}} % Shorthand for Real Numbers Set
\newcommand*{\C}{\mathbb{C}} % Shorthand for Complex Numbers Set
%\newcommand{\matr}[1]{\mathbf{#1}} % undergraduate algebra version % toggle
%\newcommand{\matr}[1]{#1}          % pure math version % toggle
\newcommand{\matr}[1]{\bm{#1}}     % ISO complying version
%\newcommand*{\diff}{\mathop{}\!\mathrm{d}} %differential d (upright) % toggle
%\newcommand*{\Diff}[1]{\mathop{}\!\mathrm{d^#1}} %differential d^n (upright) %https://tex.stackexchange.com/questions/60545/should-i-mathrm-the-d-in-my-integrals % toggle
\let\oldvec\vec
\renewcommand{\vec}[1]{\bm{\mathrm{#1}}}    % New bold vector notation

% Frequently used conjuctions in math mode
\newcommand*{\orT}{\text{ or }}
\newcommand*{\andT}{\text{ and }}
\newcommand*{\ifT}{\text{ if }}
\newcommand*{\forT}{\text{ for }}
\newcommand*{\whereT}{\text{ where }}
\newcommand*{\whenT}{\text{ when }}
\newcommand*{\thenT}{\text{ then }}
\newcommand*{\butT}{\text{ but }}
\newcommand*{\withT}{\text{ with }}

\renewcommand{\contentsname}{Table of Contents} %rename ToC

% New definition of square root:
% it renames \sqrt as \oldsqrt
\let\oldsqrt\sqrt
% it defines the new \sqrt in terms of the old one
\def\sqrt{\mathpalette\DHLhksqrt}
\def\DHLhksqrt#1#2{%
	\setbox0=\hbox{$#1\oldsqrt{#2\,}$}\dimen0=\ht0
	\advance\dimen0-0.2\ht0
	\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
	{\box0\lower0.4pt\box2}}

% bolder cdot for dotp, see more: https://tex.stackexchange.com/questions/235118/making-a-thicker-cdot-for-dot-product-that-is-thinner-than-bullet

\makeatletter
\newcommand*{\dotp}{\mathpalette\dotp@{.5}}
\newcommand*{\dotp@[2]}{\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

% creates invissection that doesn't print section name on page, see more: https://tex.stackexchange.com/questions/129978/how-to-remove-section-subsection-titles
\newcommand{\invissection}[1]{%
	\par\refstepcounter{section}% Increase section counter
	\sectionmark{#1}% Add section mark (header)
	\addcontentsline{toc}{section}{\protect\numberline{\thesection}#1}% Add section to ToC
	\clearpage
	% Add more content here, if needed.
}
% creates invissubsection that doesn't print section name on page, see more: https://tex.stackexchange.com/questions/129978/how-to-remove-section-subsection-titles
\newcommand{\invissubsection}[1]{%
	\par\refstepcounter{subsection}% Increase subsection counter
	\subsectionmark{#1}% Add subsection mark (header)
	\addcontentsline{toc}{subsection}{\protect\numberline{\thesubsection}#1}% Add subsection to ToC
	% Add more content here, if needed.
}
% making augmented matrix, see more: %https://tex.stackexchange.com/questions/33519/vertical-line-in-matrix-using-latexit
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
	\hskip -\arraycolsep
	\let\@ifnextchar\new@ifnextchar
	\array{#1}}
\makeatother
%https://tex.stackexchange.com/questions/8351/what-do-makeatletter-and-makeatother-do

%\hdashrule[0.5ex]{4cm}{0.5mm}{3mm} % toggle

% Self defined, transparent tcolorbox, see more (page 15): https://mirror.hmc.edu/ctan/macros/latex/contrib/tcolorbox/tcolorbox.pdf
\newtcolorbox{solnbox}
{% more info: https://tex.stackexchange.com/questions/287438/tcolorbox-without-background-color-transparent
	standard jigsaw,
	opacityback=0,  % this works only in combination with the key "standard jigsaw"
	arc=0mm,
	left=2mm,
	right=2mm,
	boxrule=0.22mm,
	colframe=blue!75!black
}

\SetBgContents{}
%\SetBgColor{red!30}

% End: ... GENERIC PREAMBLE
\endinput